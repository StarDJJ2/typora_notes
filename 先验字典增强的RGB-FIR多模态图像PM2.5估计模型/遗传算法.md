[遗传算法框架deap简介与使用_python deap individual-CSDN博客](https://blog.csdn.net/LOVEmy134611/article/details/111708226)

[Python手把手构建遗传算法（GA）实现最优化搜索 - FINTHON](https://finthon.com/python-genetic-algorithm/)



[【遗传编程/基因规划】python DEAP框架学习笔记-CSDN博客](https://blog.csdn.net/ocd_with_naming/article/details/99585140)

遗传算法中的这几个参数分别有什么作用？ 

设置遗传算法的参数：交叉概率0.5，变异概率0.2，迭代次数40。

cxpb, mutpb, ngen = 0.5, 0.2, 40

在遗传算法中，您提到的这几个参数是用来控制算法进化过程中的不同方面，它们分别有以下作用：

1. **交叉概率（CXPB）**：设为0.5。在遗传算法的每一代中，这个参数决定了多少比例的种群将会通过交叉（即，配对的个体交换它们的一部分基因）来产生后代。一个0.5的交叉概率意味着有50%的个体将会通过交叉来产生后代。交叉是遗传算法中引入新遗传信息的主要方式，有助于算法探索解空间，增加多样性。

2.  **变异概率（MUTPB）**：设为0.2。在每一代，这个参数定义了有多少比例的种群将会受到变异操作的影响，即在个体的某些基因上进行随机的小改动。一个0.2的变异概率意味着20%的个体将会被选中进行变异。变异操作能够防止算法过早收敛于局部最优解，提高算法的探索能力。

3.  **迭代次数（NGEN）**：设为40。这个参数指定了算法将会执行多少代（即，完整的选择、交叉、变异过程的循环）。迭代次数越多，算法有更多机会改善解，但同时也意味着算法的运行时间会更长。合理设定迭代次数是实现算法效率与效果平衡的关键。

   通过调整这些参数，可以影响遗传算法的搜索行为，从而寻找到更优的解决方案。不过，最佳的参数设置通常是问题特定的，可能需要通过一定的实验来确定。



遗传算法每次得到的解不同

在遗传算法中，每次运行得到的最佳解和其适应度值不相同，是因为遗传算法是基于随机过程的启发式搜索算法。遗传算法通过模拟自然选择和遗传学原理（如选择、交叉、变异）在解空间中进行搜索以寻找最优解。以下是几个关键点，解释为什么每次运行遗传算法可能会得到不同的结果：

1. **随机初始化**：遗传算法通常从随机生成的初始种群开始，除非每次都使用相同的随机种子（初始生成随机数的值），否则每次运行算法时初始种群将不同，导致搜索过程和最终结果的差异。

2. **选择过程中的随机性**：在选择过程中，遗传算法基于个体的适应度将一些个体从当前种群中选出来产生下一代。这种选择过程通常涉及概率和随机决策（例如，轮盘赌选择或锦标赛选择），这进一步引入了随机性。

3. **交叉和变异的随机性**：交叉（或称重组）和变异是遗传算法中引入新遗传信息至种群的机制。它们在个体基因上的操作点（即在哪个位置进行交叉或变异）通常是随机选择的，导致即便是对相同的父代个体的操作也可能产生不同的后代。

4. **局部最优解**：遗传算法可能在搜索过程中找到多个局部最优解，尤其是在解空间复杂且包含多个最优解的情况下。每次运行算法可能探索到解空间的不同区域，导致找到不同的局部最优解。

5. **算法参数**：遗传算法的表现也受到其参数设置（如种群大小、交叉率、变异率以及迭代次数等）的影响。即便是微小的参数变化也可能导致结果的显著不同，尤其是在算法的运行过程中这些参数的细微差别可能会被放大。

**减少结果变异的建议**：

使用相同的随机种子可以确保每次初始化相同，从而在每次运行时获得一致的结果。

增加种群大小和迭代次数可能有助于算法更全面地探索解空间，从而减少不同运行之间结果的差异。参数调整和算法改进可以增强算法的稳健性，减少对不同局部最优解的依赖。





# Prompt

我现在有一个xlsx的表格文件，里面包含了4列数据，从第一列到第四列分别是Similarity，S-PM2.5，Predict和Truth，我使用

s = data['Similarity']，y = data['Truth']，x1 = data['S-PM2.5']，x2 = data['Predict']分别提取了这四列数据，现在我需要使用函数y=w * x1 + (1 - w) * x2，其中w = 1 / (a + np.exp(-k * (s - 1)))来通过这四列数据拟合出最优的参数a和k，拟合的目标是使得(y_pred - y_actual)**2对于表格中的数据所得的值最小，要求使用遗传算法来拟合出最优的参数a和k。





我目前手头有一个Excel格式的数据表（xlsx），该表格包含了四列数据。这四列数据分别标记为“Similarity”（相似度）、“S-PM2.5”（特定颗粒物浓度）、“Predict”（预测值）和“Truth”（实际值）。我的目标是利用这些数据来优化两个参数，即`a`和`k`，以便能够通过特定的函数模型更准确地预测实际值。

数据提取方式如下：
- `s`对应“Similarity”列，
- `y`对应“Truth”列（实际值），
- `x1`对应“S-PM2.5”列，
- `x2`对应“Predict”列（预测值）。

我需要使用以下函数模型来拟合数据，并优化参数`a`和`k`：

\[y_{pred} = w \cdot x1 + (1 - w) \cdot x2\]

其中，权重`w`是通过另一个方程计算得出：

\[w = \frac{1}{a + \exp(-k \cdot (s - 1))}\]

拟合的目标是最小化预测值（`y_pred`）与实际值（`y_actual`）之间差的平方和，即：

\[\sum(y_{pred} - y_{actual})^2\]

为了找到最优的参数`a`和`k`，需要使用遗传算法进行参数优化。请根据提供的数据和模型描述，设计并实现一个遗传算法，以找出最小化上述差的平方和的最优参数`a`和`k`。



# 学习知识点

教程汇总：[(2 封私信 / 24 条消息) Ship - 知乎 (zhihu.com)](https://www.zhihu.com/people/xu-peng-41-24)



[【遗传编程/基因规划】python DEAP框架学习笔记_deap python-CSDN博客](https://blog.csdn.net/ocd_with_naming/article/details/99585140)

提供的 Fitness 类是一个抽象类，需要权重属性才能发挥作用。最小化适应度是使用负权重构建的，而最大化适应度则使用正权重。例如，以下行在创建器中创建一个随时可用的单一目标，最小化名为 FitnessMin 的适应度。

[DEAP进化算法包使用教程[翻译2\] - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/69071128)



这个是一个基础教程：[Creating Types — DEAP 1.4.1 documentation](https://deap.readthedocs.io/en/master/tutorials/basic/part1.html#creating-types)

create() 函数至少接受两个参数：新创建的类的名称和基类. 任何后续参数都会成为该类的属性。

The first individual created will be a simple list containing floats

register() 方法至少需要两个参数；别名和分配给该别名的函数. 调用时任何后续参数都会传递给函数
